<!DOCTYPE HTML>
<html>
	<head>
		<title>eProfesor - Moj Profil</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
				<header id="header">
					<div class="logo-and-name">
						<h1><a href="index.html">eProfesor</a></h1>
					</div>
				</header>

				<!-- Nav -->
				<nav id="nav">
					<ul>
						<li><a href="home.html">Početna</a></li>
						<li><a href="search.html">Pretraga časova</a></li>
						<li id="create-class"><a href="createLesson.html">Kreiraj čas</a></li>
						<li><a href="#profile" class="active">Moj Profil</a></li>
						<li><a href="logout.html" id = "logout">Odjavi se</a></li>
					</ul>
				</nav>

				<!-- Main -->
				<div id="main">

					<!-- Profile Section -->
					<section id="profile" class="main">
						<header class="major">
							<h2>Moj Profil</h2>
						</header>
						
						<div class="profile-container">
							<!-- Informacije o korisniku -->
							<div class="profile-info">
								<h3>Podaci o korisniku</h3>
								<table>
									<tr>
										<td><strong>Ime i prezime:</strong></td>
										<td id="name">N/A</td>
									</tr>
									<tr>
										<td><strong>Korisničko ime:</strong></td>
										<td id="username">N/A</td>
									</tr>
									<tr>
										<td><strong>Uloga:</strong></td>
										<td id="role">N/A</td>
									</tr>
								</table>								
							</div>
						</div>						

						<!-- Resetovanje lozinke -->
						<div class="reset-password">
							<h3>Resetuj lozinku</h3>
							<form action="reset-password.html" method="post">
								<div class="field">
									<label for="current-password">Trenutna lozinka</label>
									<input type="password" id="current-password" name="current-password" required />
								</div>
								<div class="field">
									<label for="new-password">Nova lozinka</label>
									<input type="password" id="new-password" name="new-password" required />
								</div>
								<div class="field">
									<label for="confirm-password">Potvrdi novu lozinku</label>
									<input type="password" id="confirm-password" name="confirm-password" required />
								</div>
								<ul class="actions">
									<li><input type="submit" value="Promeni lozinku" class="button primary" /></li>
								</ul>
							</form>
						</div>
					</section>
				</div>

				<!-- Footer -->
				<footer id="footer">
					<p class="copyright">&copy; 2024 eProfesor. Sva prava zadržana.</p>
				</footer>

			</div>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>
		<script src = "assets/js/prevent.js"></script>
		<script>

			document.addEventListener('DOMContentLoaded', function () {
			const createClassMenuItem = document.getElementById('create-class');
			const logoutButton = document.getElementById('logout');
			if (createClassMenuItem) { // Proveri da li element postoji
				const userRole = localStorage.getItem('role'); // Dohvati rolu iz localStorage
				if (userRole === 'STUDENT') {
					createClassMenuItem.remove(); // Ukloni element iz DOM-a
				}
				} else {
					console.error('Element sa ID-jem "create-class" nije pronađen.');
				}
			// Dohvatanje elemenata
			const nameElement = document.getElementById('name');
			const usernameElement = document.getElementById('username');
			const roleElement = document.getElementById('role');

			// Dohvatanje podataka iz localStorage
			const name = localStorage.getItem('name');
			const username = localStorage.getItem('username');
			role = localStorage.getItem('role');
			if (role == 'TEACHER')
				role = 'Profesor';
			// Funkcija za formatiranje stringa: prvo slovo veliko, ostalo mala
			function capitalizeFirstLetter(str) {
				if (!str) return ''; // Provera da li je string validan
				return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
			}

			// Provera i postavljanje podataka
			if (name) {
				nameElement.textContent = name;
			} else {
				nameElement.textContent = 'N/A';
			}

			if (username) {
				usernameElement.textContent = username;
			} else {
				usernameElement.textContent = 'N/A';
			}

			if (role) {
				roleElement.textContent = capitalizeFirstLetter(role);
			} else {
				roleElement.textContent = 'N/A';
			}
			if (logoutButton) {
			logoutButton.addEventListener('click', function (e) {
				e.preventDefault(); // Sprečava default ponašanje linka

				// Brišemo korisničke podatke iz localStorage
				localStorage.removeItem('name');
				localStorage.removeItem('username');
				localStorage.removeItem('role');

				window.history.replaceState(null, null, 'index.html');

				// Preusmeravanje na index.html
				window.location.href = 'index.html';
			});
		}

		});

		</script>
	</body>
</html>
